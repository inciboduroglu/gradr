<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>Bootstrap 101 Template</title>

    <!-- Bootstrap -->
    <link href="css/bootstrap.min.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  <body>
  	<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="js/bootstrap.min.js"></script>

    <h1 style="padding-left:1em" >Gradr Demo</h1>

<!-- Stack the columns on mobile by making one full-width and the other half-width -->
	<div class="container-fluid" style="padding-top:1em">
		<div class="row">
		  	<div class="col-xs-12 col-md-8">
			  	<div class="input-group">
					<span class="input-group-addon" id="basic-addon1" style="height:25em"></span>
					<!---<textarea type="text" class="form-control" placeholder="Paste your text here" aria-describedby="basic-addon1" rows="25em"></textarea>-->
					<div type="text" contenteditable="true" class="form-control" placeholder="Paste your text here" aria-describedby="basic-addon1" style="height:25em" id="essay-div"></div>
				</div>
			</div>
			<!-- On rows -->
			<div class="col-xs-6 col-md-4">
				<div style="padding-top:0.5ems"> <!-- Warning panels -->
					<span class="label label-default">Default</span></div>
					<p id="default-div">Some long text. still going, still going, still going. very long text this one</p>
				<div style="padding-top:0.5em">
					<span class="label label-primary">Primary</span></div>
					<p>Text kutusuna bir seyler yaz. Link'e basÄ±nca Default altindaki yazi degisecek, Button'a basinca tekrar degisecek. Input text kutusundaki butun yaziyi bold yapar.</p>
				<div style="padding-top:0.5em">
					<span class="label label-success">Success</span></div>
					<p id="success-div"></p>
				<div style="padding-top:0.5em">
					<span class="label label-info">Info</span></div>
				<div style="padding-top:0.5em">
					<span class="label label-warning">Warning</span></div>
					<p id="warning-div"></p>
				<div style="padding-top:0.5em">
					<span class="label label-danger">Danger</span></div>
					<p id="danger-div"></p>
				
			</div>
		</div>
		<div class="col-xs-12 col-md-8 text-right" style="padding-top:1em">
				<button class="btn btn-default" href="#" role="button" onclick="func_call()">Link</button>
				<button class="btn btn-default" type="submit" onclick="grade()">Button</button>
				<input class="btn btn-default" type="button" value="Input" onclick="bold()">
				<input class="btn btn-default" type="submit" value="Submit" onclick="highlight()">
			</div>
	</div>

    <script>
		function grade() {
		    document.getElementById("default-div").innerHTML = "Paragraph changed.";
		}
	</script>
	<script>
		function func_call(){
			document.getElementById("default-div").innerHTML = "Paragraph changed again.";
			var current_data = document.getElementById("essay-div").innerHTML;

			$.ajax({
				type: "POST",
				url: "/cgi-bin/pythoncode.py",
				data: "inci=" + current_data,
				
				success:function(suc) {
					alert(JSON.parse(suc).text)
					document.getElementById("success-div").innerHTML = JSON.parse(suc).text;
				},
				error:function(f, fail){
					document.getElementById("danger-div").innerHTML = f.statusText;
					document.getElementById("warning-div").innerHTML = fail.statusText;
					console.log(f);
					console.log(fail);
				}
			});
		}
	</script>
	<script>
		function bold(){
			var essay_div = document.getElementById("essay-div");
			var essay = essay_div.innerHTML;

			essay_div.innerHTML = essay.bold();
		}
	</script>
	<script>
		function highlight(){
			var essay_div = document.getElementById("essay-div");
			var essay = essay_div.innerHTML;

			var ind = 2;
			var len = 3;
			essay_div.innerHTML = essay.substring(0, ind) + "<span style='background-color:yellow'>" + essay.substring(ind, ind+len) + "</span>" + essay.substring(ind+len, essay.length);
		}
	</script>
  </body>
</html>